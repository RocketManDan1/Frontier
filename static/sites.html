<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Frontier: Sol 2000 ‚Äî Sites &amp; Industry</title>
    <link rel="stylesheet" href="/static/styles.css?v=layout43" />
  </head>

  <body class="sitesPage">
    <div class="app">
      <div class="top panel">
        <div class="topbar">
          <div>
            <div class="title">Sites &amp; Industry</div>
            <div class="subtitle" id="sitesSubtitle">Celestial sites and industrial operations</div>
          </div>

          <nav class="tabs">
            <a class="tab" href="/">Map</a>
            <a class="tab" href="/fleet">Fleet</a>
            <a class="tab" href="/shipyard">Shipyard</a>
            <a class="tab active" href="/sites">Sites</a>
            <a class="tab" href="/research">Research</a>
            <a class="tab" href="/organization">Organization</a>
            <a class="tab authAdminTab" href="/admin">Admin</a>
          </nav>
        </div>
      </div>

      <!-- Sub-tabs: Overview / Industrial -->
      <div class="sitesSubTabs">
        <button class="siteSubTab active" data-tab="overview">Overview</button>
        <button class="siteSubTab" data-tab="industrial">Industrial</button>
        <button class="siteSubTab" data-tab="cargo">Cargo</button>
      </div>

      <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê OVERVIEW TAB ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
      <div class="sitesTabContent" id="tabOverview">
        <div class="sitesOverviewLayout">
          <!-- Left: Sites list -->
          <div class="panel sitesListPanel">
            <div class="panelHeader">
              <span class="panelTitle">Locations</span>
              <input type="text" class="sitesSearch" id="sitesSearchInput" placeholder="Filter‚Ä¶" />
            </div>
            <div class="sitesFilterBar">
              <button class="siteFilterBtn active" data-filter="all">All</button>
              <button class="siteFilterBtn" data-filter="surface">Surface</button>
              <button class="siteFilterBtn" data-filter="orbital">Orbital</button>
              <button class="siteFilterBtn" data-filter="active">Has Industry</button>
              <span class="filterSpacer"></span>
              <button class="siteGroupBtn" id="overviewGroupByBody" title="Group by body">ü™ê Group</button>
            </div>
            <div class="tableWrap">
              <table class="sitesTable" id="sitesTable">
                <thead>
                  <tr>
                    <th>Location</th>
                    <th>Type</th>
                    <th>Ships</th>
                    <th>Inventory</th>
                    <th>Equipment</th>
                    <th>Jobs</th>
                  </tr>
                </thead>
                <tbody id="sitesTableBody"></tbody>
              </table>
            </div>
          </div>

          <!-- Right: Site detail -->
          <div class="panel siteDetailPanel" id="siteDetailPanel">
            <div class="siteDetailPlaceholder" id="siteDetailPlaceholder">
              <div class="muted">Select a location to view details</div>
            </div>
            <div class="siteDetailContent" id="siteDetailContent" style="display:none">
              <div class="panelHeader">
                <span class="panelTitle" id="siteDetailName">‚Äî</span>
                <span class="badge" id="siteDetailType">‚Äî</span>
              </div>

              <!-- Site info -->
              <div class="siteInfoGrid" id="siteInfoGrid"></div>

              <!-- Resource deposits (surface only) -->
              <div class="siteSection" id="siteDepositsSection" style="display:none">
                <div class="siteSectionTitle">Resource Deposits</div>
                <div class="siteDepositsGrid" id="siteDepositsGrid"></div>
              </div>

              <!-- Inventory -->
              <div class="siteSection">
                <div class="siteSectionTitle">Inventory</div>
                <div class="invGrid" id="siteInventoryGrid"></div>
                <div class="muted" id="siteInventoryEmpty">No inventory</div>
              </div>

              <!-- Deployed equipment -->
              <div class="siteSection">
                <div class="siteSectionTitle">Deployed Equipment</div>
                <div class="invGrid" id="siteEquipmentGrid"></div>
                <div class="muted" id="siteEquipmentEmpty">No deployed equipment</div>
              </div>

              <!-- Docked ships -->
              <div class="siteSection">
                <div class="siteSectionTitle">Docked Ships</div>
                <div id="siteShipsList" class="siteShipsList"></div>
                <div class="muted" id="siteShipsEmpty">No ships docked</div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê INDUSTRIAL TAB ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
      <div class="sitesTabContent" id="tabIndustrial" style="display:none">

        <!-- Location selector for industrial view -->
        <div class="panel industryLocationBar">
          <label class="industryLabel">Site:</label>
          <select id="industryLocationSelect" class="industrySelect">
            <option value="">‚Äî Select a location ‚Äî</option>
          </select>
          <span class="muted" id="industryLocationInfo"></span>
        </div>

        <div id="industryContent" style="display:none">

          <!-- Power Balance (compact) -->
          <div class="panel industryPowerPanel">
            <div class="panelHeader">
              <span class="panelTitle">Power &amp; Thermal</span>
            </div>
            <div class="industryPowerContent" id="industryPowerContent"></div>
          </div>

          <!-- Deploy button -->
          <div class="industryActionBar">
            <button class="btnSmall" id="btnDeployEquip">Deploy Equipment</button>
          </div>

          <!-- ‚ïê‚ïê‚ïê Constructors (collapsible) ‚ïê‚ïê‚ïê -->
          <div class="panel industryConstructorsPanel">
            <div class="panelHeader collapsibleHeader" id="constructorsSectionHeader">
              <span class="collapseToggle">‚ñæ</span>
              <span class="panelTitle">Constructors</span>
              <span class="badge" id="constructorCountBadge">0</span>
              <span class="muted" id="constructorSummary"></span>
            </div>
            <div class="collapsibleBody" id="constructorsSectionBody">
              <div id="constructorsList"></div>
            </div>
          </div>

          <!-- ‚ïê‚ïê‚ïê Mining Summary (surface sites) ‚ïê‚ïê‚ïê -->
          <div class="panel industryMiningPanel" id="industryMiningPanel" style="display:none">
            <div class="panelHeader">
              <span class="panelTitle">Mining Output</span>
            </div>
            <div class="industryMiningContent" id="industryMiningContent"></div>
          </div>

          <!-- ‚ïê‚ïê‚ïê Refinery Slots (priority ordered) ‚ïê‚ïê‚ïê -->
          <div class="panel industryRefinerySlotsPanel">
            <div class="panelHeader">
              <span class="panelTitle">Refinery Slots</span>
              <span class="badge" id="refinerySlotCountBadge">0</span>
            </div>
            <div id="refinerySlotsList" class="refinerySlotsList"></div>
          </div>

          <!-- ‚ïê‚ïê‚ïê Construction Queue (pooled speed) ‚ïê‚ïê‚ïê -->
          <div class="panel industryConstructionPanel">
            <div class="panelHeader">
              <span class="panelTitle">Construction Queue</span>
              <span class="muted" id="constructionPoolInfo"></span>
            </div>
            <div id="constructionQueueList" class="constructionQueueList"></div>
            <div class="constructionQueueActions">
              <button class="btnSmall" id="btnAddConstruction">+ Add to Queue</button>
            </div>
          </div>

          <!-- ‚ïê‚ïê‚ïê Production Chain Flow ‚ïê‚ïê‚ïê -->
          <div class="panel industryChainPanel">
            <div class="panelHeader">
              <span class="panelTitle">Production Chain</span>
            </div>
            <div class="chainFlow" id="chainFlow">
              <div class="chainColumn">
                <div class="chainColumnHeader"><span class="chainColumnIcon">‚óÜ</span> Raw Materials</div>
                <div class="chainColumnBody" id="chainRawMaterials"></div>
              </div>
              <div class="chainArrow">
                <div class="chainArrowLine"></div>
                <div class="chainArrowHead">‚ñ∂</div>
                <div class="chainArrowLabel">REFINE</div>
              </div>
              <div class="chainColumn">
                <div class="chainColumnHeader"><span class="chainColumnIcon">‚¨°</span> Refined Materials</div>
                <div class="chainColumnBody" id="chainRefined"></div>
              </div>
              <div class="chainArrow">
                <div class="chainArrowLine"></div>
                <div class="chainArrowHead">‚ñ∂</div>
                <div class="chainArrowLabel">BUILD</div>
              </div>
              <div class="chainColumn">
                <div class="chainColumnHeader"><span class="chainColumnIcon">‚öô</span> Constructable</div>
                <div class="chainColumnBody" id="chainConstructable"></div>
              </div>
            </div>
          </div>

          <!-- Job History -->
          <div class="panel industryHistoryPanel">
            <div class="panelHeader">
              <span class="panelTitle">Job History</span>
            </div>
            <div class="industryHistoryList" id="industryHistoryList"></div>
          </div>

        </div>
      </div>

      <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê CARGO TAB ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
      <div class="sitesTabContent" id="tabCargo" style="display:none">
        <div class="cargoTabLayout">
          <!-- Left: Locations list -->
          <div class="panel cargoLocationsPanel">
            <div class="panelHeader">
              <span class="panelTitle">Locations</span>
              <input type="text" class="sitesSearch" id="cargoSearchInput" placeholder="Filter‚Ä¶" />
            </div>
            <div class="sitesFilterBar cargoFilterBar">
              <button class="siteGroupBtn" id="cargoGroupByBody" title="Group by body">ü™ê Group</button>
            </div>
            <div class="tableWrap">
              <table class="sitesTable cargoSitesTable" id="cargoSitesTable">
                <thead>
                  <tr>
                    <th>Location</th>
                    <th>Ships</th>
                    <th>Cargo</th>
                  </tr>
                </thead>
                <tbody id="cargoSitesTableBody"></tbody>
              </table>
            </div>
          </div>

          <!-- Right: Cargo workspace (three-column) -->
          <div class="panel cargoWorkspacePanel" id="cargoWorkspacePanel">
            <div class="cargoPlaceholder" id="cargoPlaceholder">
              <div class="muted">Select a location to manage cargo</div>
            </div>
            <div class="cargoWorkspace" id="cargoWorkspace" style="display:none">
              <!-- Header bar with location name -->
              <div class="cargoHeader">
                <span class="panelTitle" id="cargoLocationName">‚Äî</span>
                <button class="btnSmall" id="cargoRefreshBtn">Refresh</button>
              </div>

              <!-- Three-column layout -->
              <div class="cargoColumns">
                <!-- Column 1: Source -->
                <div class="cargoColumn cargoSourceCol">
                  <div class="cargoColHeader">
                    <span class="cargoColTitle">Source</span>
                    <select class="cargoEntitySelect" id="cargoSourceSelect"></select>
                  </div>
                  <div class="cargoColBody" id="cargoSourceBody"></div>
                </div>

                <!-- Column 2: Staging -->
                <div class="cargoColumn cargoStagingCol">
                  <div class="cargoColHeader">
                    <span class="cargoColTitle">Staging</span>
                    <span class="muted cargoStagingCount" id="cargoStagingCount">0 items</span>
                  </div>
                  <div class="cargoColBody cargoStagingBody" id="cargoStagingBody">
                    <div class="cargoStagingEmpty muted" id="cargoStagingEmpty">Click items on the left to stage them for transfer</div>
                    <div class="cargoStagingList" id="cargoStagingList"></div>
                  </div>
                  <div class="cargoStagingActions">
                    <button class="btnSmall btnPrimary" id="cargoTransferBtn" disabled>Transfer ‚Üí</button>
                    <button class="btnSmall" id="cargoClearBtn">Clear</button>
                  </div>
                </div>

                <!-- Column 3: Destination -->
                <div class="cargoColumn cargoDestCol">
                  <div class="cargoColHeader">
                    <span class="cargoColTitle">Destination</span>
                    <select class="cargoEntitySelect" id="cargoDestSelect"></select>
                  </div>
                  <div class="cargoColBody" id="cargoDestBody"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Deploy Modal -->
      <div class="modal" id="deployModal" style="display:none">
        <div class="modalOverlay"></div>
        <div class="modalBody deployModalBody">
          <div class="panelHeader">
            <span class="panelTitle">Deploy Equipment</span>
            <button class="btnSmall" id="deployModalClose">‚úï</button>
          </div>
          <div id="deployPowerSummary" class="deployPowerSummary"></div>
          <div id="deployableItemsList" class="deployItemsList"></div>
          <div class="muted" id="deployableEmpty" style="padding:12px">No deployable equipment in inventory</div>
        </div>
      </div>

      <!-- Recipe Select Modal (for refinery slot assignment and construction queue) -->
      <div class="modal" id="recipeSelectModal" style="display:none">
        <div class="modalOverlay"></div>
        <div class="modalBody recipeSelectModalBody">
          <div class="panelHeader">
            <span class="panelTitle" id="recipeSelectTitle">Select Recipe</span>
            <button class="btnSmall" id="recipeSelectModalClose">‚úï</button>
          </div>
          <div id="recipeSelectContent"></div>
        </div>
      </div>

    </div>

    <script src="/static/js/auth.js?v=layout43"></script>
    <script src="/static/js/clock.js?v=layout43"></script>
    <script src="/static/js/item_display.js?v=id4"></script>
    <script src="/static/js/item_info.js?v=ii2"></script>
    <script src="/static/js/sites.js?v=layout43"></script>
  </body>
</html>
