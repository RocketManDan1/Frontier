{
  "template_id": "universal_thruster_v1",
  "schema_version": "1.0",
  "tech_category": "nuclear_thermal_rocket",
  "display_name": "Nuclear Thermal Rocket",
  "notes": [
    "One active engine per vessel.",
    "Reactor thermal power curve: P_th(MW) = 50 * R^2, where R is Reactor Rating 1..10.",
    "If reactor can't supply an item's P_req, throttle is capped: maxThrottle = min(1, P_th(R)/item.P_req_mw_th).",
    "ActualThrust = maxThrust * throttle.",
    "Robotic shielding/hardening mass (optional ship rule): m_shield_t = 0.2 * R."
  ],
  "constraints": {
    "one_active_main_per_vessel": true
  },
  "power_interface": {
    "model": "reactor_thermal",
    "rating_min": 1,
    "rating_max": 10,
    "power_formula": "50 * R^2",
    "throttle_cap_formula": "min(1, P_th(R) / main.P_req_mw_th)"
  },
  "resource_interfaces": {
    "propellant": {
      "supported": [
        "water"
      ],
      "default": "water"
    },
    "consumables": {
      "fissiles": {
        "model": "core_life_years",
        "properties": {
          "core_life_years_at_full_power": 5
        }
      },
      "other": {}
    }
  },
  "mainline": [
    {
      "id": "ntr_m1_nerva_solid_core",
      "name": "NERVA-class Solid Core",
      "tier": 1,
      "branch": "solid_core",
      "mass_t": 6.0,
      "performance": {
        "max_thrust_kN": 180,
        "isp_s": 850
      },
      "power_requirements": {
        "thermal_mw": 750,
        "electric_mw": null,
        "min_reactor_rating": 4,
        "min_bus_voltage_kv": null
      },
      "consumables": {
        "reaction_mass": "water",
        "fissiles": {
          "model": "core_life_years",
          "properties": {
            "core_life_years_at_full_power": 5
          }
        }
      },
      "ui_tags": [
        "solid_core"
      ]
    },
    {
      "id": "ntr_m2_dumbo_folded_flow",
      "name": "DUMBO Folded-Flow Solid Core",
      "tier": 2,
      "branch": "solid_core",
      "mass_t": 2.5,
      "performance": {
        "max_thrust_kN": 332,
        "isp_s": 920
      },
      "power_requirements": {
        "thermal_mw": 1500,
        "electric_mw": null,
        "min_reactor_rating": 6,
        "min_bus_voltage_kv": null
      },
      "consumables": {
        "reaction_mass": "water",
        "fissiles": {
          "model": "core_life_years",
          "properties": {
            "core_life_years_at_full_power": 5
          }
        }
      },
      "ui_tags": [
        "solid_core"
      ]
    },
    {
      "id": "ntr_m3_particle_bed",
      "name": "Particle Bed NTR",
      "tier": 3,
      "branch": "solid_core",
      "mass_t": 3.0,
      "performance": {
        "max_thrust_kN": 472,
        "isp_s": 950
      },
      "power_requirements": {
        "thermal_mw": 2200,
        "electric_mw": null,
        "min_reactor_rating": 7,
        "min_bus_voltage_kv": null
      },
      "consumables": {
        "reaction_mass": "water",
        "fissiles": {
          "model": "core_life_years",
          "properties": {
            "core_life_years_at_full_power": 5
          }
        }
      },
      "ui_tags": [
        "solid_core"
      ]
    },
    {
      "id": "ntr_m4_advanced_carbide_cermet",
      "name": "Advanced Carbide/Cermet Solid Core",
      "tier": 4,
      "branch": "solid_core",
      "mass_t": 4.0,
      "performance": {
        "max_thrust_kN": 486,
        "isp_s": 1050
      },
      "power_requirements": {
        "thermal_mw": 2500,
        "electric_mw": null,
        "min_reactor_rating": 8,
        "min_bus_voltage_kv": null
      },
      "consumables": {
        "reaction_mass": "water",
        "fissiles": {
          "model": "core_life_years",
          "properties": {
            "core_life_years_at_full_power": 5
          }
        }
      },
      "ui_tags": [
        "solid_core"
      ]
    },
    {
      "id": "ntr_m5_closed_cycle_gas_core",
      "name": "Closed-Cycle Gas Core (\"Lightbulb\")",
      "tier": 5,
      "branch": "gas_core_closed",
      "mass_t": 8.0,
      "performance": {
        "max_thrust_kN": 397,
        "isp_s": 1800
      },
      "power_requirements": {
        "thermal_mw": 3500,
        "electric_mw": null,
        "min_reactor_rating": 9,
        "min_bus_voltage_kv": null
      },
      "consumables": {
        "reaction_mass": "water",
        "fissiles": {
          "model": "core_life_years",
          "properties": {
            "core_life_years_at_full_power": 5
          }
        }
      },
      "ui_tags": [
        "gas_core_closed"
      ]
    },
    {
      "id": "ntr_m6_open_cycle_gas_core",
      "name": "Open-Cycle Gas Core",
      "tier": 6,
      "branch": "gas_core_open",
      "mass_t": 10.0,
      "performance": {
        "max_thrust_kN": 340,
        "isp_s": 3000
      },
      "power_requirements": {
        "thermal_mw": 5000,
        "electric_mw": null,
        "min_reactor_rating": 10,
        "min_bus_voltage_kv": null
      },
      "consumables": {
        "reaction_mass": "water",
        "fissiles": {
          "model": "core_life_years",
          "properties": {
            "core_life_years_at_full_power": 5
          }
        }
      },
      "ui_tags": [
        "gas_core_open"
      ]
    }
  ],
  "upgrades": [
    {
      "id": "ntr_u1_high_temp_fuel_elements",
      "name": "High-Temperature Fuel Elements",
      "tier_between_main": [
        1,
        2
      ],
      "prerequisites": [
        "ntr_m1_nerva_solid_core"
      ],
      "applies_to_branches": [
        "solid_core"
      ],
      "effects": [
        {
          "system": "main",
          "path": "performance.isp_s",
          "op": "mul",
          "value": 1.03
        },
        {
          "system": "main",
          "path": "performance.max_thrust_kN",
          "op": "mul",
          "value": 1.05
        }
      ],
      "tradeoffs": [
        {
          "system": "reactor",
          "path": "build_cost",
          "op": "mul",
          "value": 1.1,
          "note": "Optional economy hook."
        }
      ],
      "unlocks": [],
      "ui_tags": []
    },
    {
      "id": "ntr_u2_neutronics_optimization",
      "name": "Compact Reflector & Neutronics Optimization",
      "tier_between_main": [
        2,
        3
      ],
      "prerequisites": [
        "ntr_m2_dumbo_folded_flow"
      ],
      "applies_to_branches": [
        "solid_core"
      ],
      "effects": [
        {
          "system": "main",
          "path": "power_requirements.min_reactor_rating",
          "op": "add",
          "value": -1
        }
      ],
      "tradeoffs": [],
      "unlocks": [],
      "ui_tags": []
    },
    {
      "id": "ntr_u3_erosion_control",
      "name": "Particle Bed Containment & Erosion Control",
      "tier_between_main": [
        3,
        4
      ],
      "prerequisites": [
        "ntr_m3_particle_bed"
      ],
      "applies_to_branches": [
        "solid_core"
      ],
      "effects": [
        {
          "system": "main",
          "path": "performance.isp_s",
          "op": "mul",
          "value": 1.05
        }
      ],
      "tradeoffs": [
        {
          "system": "main",
          "path": "performance.max_thrust_kN",
          "op": "mul",
          "value": 0.95
        },
        {
          "system": "fissiles",
          "path": "burn_rate",
          "op": "mul",
          "value": 0.9,
          "note": "Interpreted as 10% longer core life at equal usage."
        }
      ],
      "unlocks": [],
      "ui_tags": []
    },
    {
      "id": "ntr_u4_crack_resistant_nozzles",
      "name": "Carbide/Cermet Manufacturing & Crack-Resistant Nozzles",
      "tier_between_main": [
        4,
        5
      ],
      "prerequisites": [
        "ntr_m4_advanced_carbide_cermet"
      ],
      "applies_to_branches": [
        "solid_core"
      ],
      "effects": [
        {
          "system": "main",
          "path": "performance.max_thrust_kN",
          "op": "mul",
          "value": 1.05
        },
        {
          "system": "main",
          "path": "mass_t",
          "op": "mul",
          "value": 0.95
        }
      ],
      "tradeoffs": [],
      "unlocks": [
        "ntr_m5_closed_cycle_gas_core"
      ],
      "ui_tags": []
    },
    {
      "id": "ntr_u5_plasma_stability_control",
      "name": "Radiative Cavity & Plasma Stability Control",
      "tier_between_main": [
        5,
        6
      ],
      "prerequisites": [
        "ntr_m5_closed_cycle_gas_core"
      ],
      "applies_to_branches": [
        "gas_core_closed",
        "gas_core_open"
      ],
      "effects": [
        {
          "system": "main",
          "path": "performance.isp_s",
          "op": "mul",
          "value": 1.1
        }
      ],
      "tradeoffs": [
        {
          "system": "reactor",
          "path": "module_mass",
          "op": "mul",
          "value": 1.2,
          "note": "Optional: apply to reactor module mass if you track gas-core control hardware separately."
        }
      ],
      "unlocks": [
        "ntr_m6_open_cycle_gas_core"
      ],
      "ui_tags": []
    }
  ],
  "compat": {
    "legacy_research_tree_fields": {
      "engines": [
        {
          "id": "ntr_m1_nerva_solid_core",
          "name": "NERVA-class Solid Core",
          "tier": 1,
          "engine_mass_t": 6.0,
          "min_reactor_rating": 4,
          "P_req_mw_th": 750,
          "isp_s": 850,
          "max_thrust_kN": 180,
          "branch": "solid_core",
          "consumables": {
            "reaction_mass": "water",
            "fissiles": {
              "model": "core_life_years",
              "core_life_years_at_full_power": 5
            }
          }
        },
        {
          "id": "ntr_m2_dumbo_folded_flow",
          "name": "DUMBO Folded-Flow Solid Core",
          "tier": 2,
          "engine_mass_t": 2.5,
          "min_reactor_rating": 6,
          "P_req_mw_th": 1500,
          "isp_s": 920,
          "max_thrust_kN": 332,
          "branch": "solid_core",
          "consumables": {
            "reaction_mass": "water",
            "fissiles": {
              "model": "core_life_years",
              "core_life_years_at_full_power": 5
            }
          }
        },
        {
          "id": "ntr_m3_particle_bed",
          "name": "Particle Bed NTR",
          "tier": 3,
          "engine_mass_t": 3.0,
          "min_reactor_rating": 7,
          "P_req_mw_th": 2200,
          "isp_s": 950,
          "max_thrust_kN": 472,
          "branch": "solid_core",
          "consumables": {
            "reaction_mass": "water",
            "fissiles": {
              "model": "core_life_years",
              "core_life_years_at_full_power": 5
            }
          }
        },
        {
          "id": "ntr_m4_advanced_carbide_cermet",
          "name": "Advanced Carbide/Cermet Solid Core",
          "tier": 4,
          "engine_mass_t": 4.0,
          "min_reactor_rating": 8,
          "P_req_mw_th": 2500,
          "isp_s": 1050,
          "max_thrust_kN": 486,
          "branch": "solid_core",
          "consumables": {
            "reaction_mass": "water",
            "fissiles": {
              "model": "core_life_years",
              "core_life_years_at_full_power": 5
            }
          }
        },
        {
          "id": "ntr_m5_closed_cycle_gas_core",
          "name": "Closed-Cycle Gas Core (\"Lightbulb\")",
          "tier": 5,
          "engine_mass_t": 8.0,
          "min_reactor_rating": 9,
          "P_req_mw_th": 3500,
          "isp_s": 1800,
          "max_thrust_kN": 397,
          "branch": "gas_core_closed",
          "consumables": {
            "reaction_mass": "water",
            "fissiles": {
              "model": "core_life_years",
              "core_life_years_at_full_power": 5
            }
          }
        },
        {
          "id": "ntr_m6_open_cycle_gas_core",
          "name": "Open-Cycle Gas Core",
          "tier": 6,
          "engine_mass_t": 10.0,
          "min_reactor_rating": 10,
          "P_req_mw_th": 5000,
          "isp_s": 3000,
          "max_thrust_kN": 340,
          "branch": "gas_core_open",
          "consumables": {
            "reaction_mass": "water",
            "fissiles": {
              "model": "core_life_years",
              "core_life_years_at_full_power": 5
            }
          }
        }
      ],
      "upgrades": [
        {
          "id": "ntr_u1_high_temp_fuel_elements",
          "name": "High-Temperature Fuel Elements",
          "tier_between_main": [
            1,
            2
          ],
          "prerequisites": [
            "ntr_m1_nerva_solid_core"
          ],
          "applies_to_branches": [
            "solid_core"
          ],
          "effects": [
            {
              "stat": "isp_s",
              "op": "mul",
              "value": 1.03
            },
            {
              "stat": "max_thrust_kN",
              "op": "mul",
              "value": 1.05
            }
          ],
          "tradeoffs": [
            {
              "system": "reactor",
              "stat": "build_cost",
              "op": "mul",
              "value": 1.1,
              "note": "Optional economy hook."
            }
          ],
          "unlocks": []
        },
        {
          "id": "ntr_u2_neutronics_optimization",
          "name": "Compact Reflector & Neutronics Optimization",
          "tier_between_main": [
            2,
            3
          ],
          "prerequisites": [
            "ntr_m2_dumbo_folded_flow"
          ],
          "applies_to_branches": [
            "solid_core"
          ],
          "effects": [
            {
              "stat": "min_reactor_rating",
              "op": "add",
              "value": -1
            }
          ],
          "tradeoffs": [],
          "unlocks": []
        },
        {
          "id": "ntr_u3_erosion_control",
          "name": "Particle Bed Containment & Erosion Control",
          "tier_between_main": [
            3,
            4
          ],
          "prerequisites": [
            "ntr_m3_particle_bed"
          ],
          "applies_to_branches": [
            "solid_core"
          ],
          "effects": [
            {
              "stat": "isp_s",
              "op": "mul",
              "value": 1.05
            }
          ],
          "tradeoffs": [
            {
              "stat": "max_thrust_kN",
              "op": "mul",
              "value": 0.95
            },
            {
              "system": "fissiles",
              "stat": "burn_rate",
              "op": "mul",
              "value": 0.9,
              "note": "Interpreted as 10% longer core life at equal usage."
            }
          ],
          "unlocks": []
        },
        {
          "id": "ntr_u4_crack_resistant_nozzles",
          "name": "Carbide/Cermet Manufacturing & Crack-Resistant Nozzles",
          "tier_between_main": [
            4,
            5
          ],
          "prerequisites": [
            "ntr_m4_advanced_carbide_cermet"
          ],
          "applies_to_branches": [
            "solid_core"
          ],
          "effects": [
            {
              "stat": "max_thrust_kN",
              "op": "mul",
              "value": 1.05
            },
            {
              "stat": "engine_mass_t",
              "op": "mul",
              "value": 0.95
            }
          ],
          "tradeoffs": [],
          "unlocks": [
            "ntr_m5_closed_cycle_gas_core"
          ]
        },
        {
          "id": "ntr_u5_plasma_stability_control",
          "name": "Radiative Cavity & Plasma Stability Control",
          "tier_between_main": [
            5,
            6
          ],
          "prerequisites": [
            "ntr_m5_closed_cycle_gas_core"
          ],
          "applies_to_branches": [
            "gas_core_closed",
            "gas_core_open"
          ],
          "effects": [
            {
              "stat": "isp_s",
              "op": "mul",
              "value": 1.1
            }
          ],
          "tradeoffs": [
            {
              "system": "reactor",
              "stat": "module_mass",
              "op": "mul",
              "value": 1.2,
              "note": "Optional: apply to reactor module mass if you track gas-core control hardware separately."
            }
          ],
          "unlocks": [
            "ntr_m6_open_cycle_gas_core"
          ]
        }
      ]
    }
  }
}
